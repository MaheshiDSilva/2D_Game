<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2D Game</title>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style>

        .body {
            margin: 0px;
        }

        .background {
            width: 100%;
            height: 100vh;
            background-image: url("assets/img/background1.jpg");
            background-size: cover;
            background-repeat: repeat-x;
            overflow-x: hidden;
            position: absolute;
        }

        .boy {
            height: 300px;
            margin-top: 350px;
            position: absolute;
        }

        .box{
            width: 250px;
            height: 250px;
            /*background-color: red;*/
            position: absolute;
            margin-top: 500px;
            background-image: url("assets/img/spyro-dragon.gif");
            background-size: contain;
            background-repeat: no-repeat;
        }


    </style>

</head>
<body class="body" onkeypress="keyCheck(event)" onload="idleAnimationStart();createBoxes()">
<div class="background" id="background">
    <img alt="" class="boy" id="boy" src="assets/img/Idle%20(1).png">
</div>

<script src="assets/js/bootstrap.js"></script>
<script>

    var boy = document.getElementById("boy");
    IdleImageNumber = 1;
    idleAnimationNumber = 0;

    function idleAnimation() {
        IdleImageNumber = IdleImageNumber + 1;
        if (IdleImageNumber == 11) {
            IdleImageNumber = 1;
        }

        boy.src = "assets/img/Idle%20(" + IdleImageNumber + ").png";
    }

    function idleAnimationStart() {
        idleAnimationNumber = setInterval(idleAnimation, 200)
    }

    RunImageNumber = 1;
    runAnimationNumber = 0;

    function runAnimation() {
        RunImageNumber = RunImageNumber + 1;

        if (RunImageNumber == 11) {
            RunImageNumber = 1;
        }

        boy.src = "assets/img/Run%20(" + RunImageNumber + ").png";
    }

    function RunAnimationStart() {
        runAnimationNumber = setInterval(runAnimation, 100);
        clearInterval(idleAnimationNumber);
    }

    jumpAnimationNumber = 0;
    JumpImageNumber = 1;
    boyMarginTop = 450;

    function jumpAnimation() {
        JumpImageNumber = JumpImageNumber + 1;

        if (JumpImageNumber <= 6) {
            boyMarginTop = boyMarginTop - 20;
            boy.style.marginTop = boyMarginTop + "px"
        }
        if (JumpImageNumber >= 7) {
            boyMarginTop = boyMarginTop + 20;
            boy.style.marginTop = boyMarginTop + "px";
        }

        if (JumpImageNumber == 11) {
            JumpImageNumber = 1;
            clearInterval(jumpAnimationNumber);
            jumpAnimationNumber = 0;
            RunImageNumber = 0;
            RunAnimationStart();
        }

        boy.src = "assets/img/Jump%20(" + JumpImageNumber + ").png";
    }

    function jumpAnimationStart() {
        clearInterval(idleAnimationNumber);
        RunImageNumber = 0;
        clearInterval(runAnimationNumber);
        jumpAnimationNumber = setInterval(jumpAnimation, 100);
    }

    function keyCheck(event) {
        // alert(event.which);
        // enter=13
        //space=32

        var keyCode = event.which;

        if (keyCode == 13) {
            if (runAnimationNumber == 0) {
                RunAnimationStart();
            }

            if (moveBackgroundAnimationId == 0) {
                moveBackgroundAnimationId = setInterval(moveBackground, 100);
            }

            if (boxAnimationId==0){
                boxAnimationId=setInterval(boxAnimation,100);
            }

        }

        if (keyCode == 32) {
            if (jumpAnimationNumber == 0) {
                jumpAnimationStart();
            }

            if (moveBackgroundAnimationId == 0) {
                moveBackgroundAnimationId = setInterval(moveBackground, 100);
            }

            if (boxAnimationId==0){
                boxAnimationId=setInterval(boxAnimation,100);
            }
        }
    }

    var backgroundImagePositionX = 0;
    var moveBackgroundAnimationId = 0;

    function moveBackground() {
        backgroundImagePositionX = backgroundImagePositionX - 20;

        document.getElementById("background").style.backgroundPositionX = backgroundImagePositionX + "px";
    }

    boxMarginLeft=1485;

    function createBoxes(){

        for (var i = 0; i < 10; i++) {

            var box=document.createElement("div");
            box.className="box";
            document.getElementById("background").appendChild(box);
            box.style.marginLeft=boxMarginLeft+"px";
            // boxMarginLeft=boxMarginLeft+800;
            box.id="box"+i;

            if (i<5){
                boxMarginLeft=boxMarginLeft+1000;
            }
            if (i>=5){
                boxMarginLeft=boxMarginLeft+500;
            }

        }

    }

    var boxAnimationId=0;
    function boxAnimation(){
        for (var i = 0; i < 10; i++) {
            var box=document.getElementById("box"+i);
            var currentMarginLeft=getComputedStyle(box).marginLeft;
            var newMarginLeft=parseInt(currentMarginLeft)-25;
            box.style.marginLeft=newMarginLeft+"px";
        }
    }

</script>
</body>
</html>